<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-advanced/config" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Project Config | GojiJS</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://goji.js.org/docs/advanced/config"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Project Config | GojiJS"><meta data-rh="true" name="description" content="Normally GojiJS works out of the box, but if you want to customize the build process and result, you"><meta data-rh="true" property="og:description" content="Normally GojiJS works out of the box, but if you want to customize the build process and result, you"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://goji.js.org/docs/advanced/config"><link data-rh="true" rel="alternate" href="https://goji.js.org/docs/advanced/config" hreflang="en"><link data-rh="true" rel="alternate" href="https://goji.js.org/zh/docs/advanced/config" hreflang="zh"><link data-rh="true" rel="alternate" href="https://goji.js.org/docs/advanced/config" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="GojiJS RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="GojiJS Atom Feed"><link rel="stylesheet" href="/assets/css/styles.8eba81f6.css">
<link rel="preload" href="/assets/js/runtime~main.b0278967.js" as="script">
<link rel="preload" href="/assets/js/main.352c77a8.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_G6ar" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><b class="navbar__title text--truncate">GojiJS</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/get-started/introduction">Docs</a><a class="navbar__item navbar__link" href="/blog">Blog</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_xrmG"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/docs/advanced/config" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/zh/docs/advanced/config" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh">中文</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://github.com/airbnb/goji-js" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_awgD"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_OLSw colorModeToggle_Hg9V"><button class="clean-btn toggleButton_wYmb toggleButtonDisabled_vaDU" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_Sxwe"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_Yem1"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_xrOJ"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_UyTV docsWrapper_BqXd"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_z1FD" type="button"></button><div class="docPage_pOTq"><aside class="theme-doc-sidebar-container docSidebarContainer_aIKW"><div class="sidebarViewport_DwR9"><div class="sidebar_vJCc"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_qiME"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/get-started/introduction">Get Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/guide/app">Guide</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/advanced/config">Advanced</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/advanced/config">Project Config</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/advanced/css">CSS Module</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/advanced/css-in-js">CSS-in-JS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/advanced/plugins">Plugins</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/advanced/testing">Testing Library</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/advanced/sub-packages">Sub Packages</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/faq">FAQ</a></li></ul></nav></div></div></aside><main class="docMainContainer_fv3b"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_YAwJ"><div class="docItemContainer_Rv5Z"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_zCmv" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_JFrk"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Advanced</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Project Config</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_O_Qc theme-doc-toc-mobile tocMobile_tjDr"><button type="button" class="clean-btn tocCollapsibleButton_htYj">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Project Config</h1><p>Normally GojiJS works out of the box, but if you want to customize the build process and result, you
can use the <code>goji.config.js</code> file.</p><h2 class="anchor anchorWithStickyNavbar_fF9Z" id="example">Example<a href="#example" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>An example of the configuration file looks like this:</p><div class="language-js codeBlockContainer_ZGJx theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qZBB"><pre tabindex="0" class="prism-code language-js codeBlock_TAPP thin-scrollbar"><code class="codeBlockLines_AdAo"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// `goji.config.js`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">progress</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">watch</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">outputPath</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">__basedir</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;dist&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">nohoist</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">maxPackages</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">parallel</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">loader</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">minimize</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_TNwR"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MVhB" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_yxgH"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_QJLJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_fF9Z" id="options---bundle-tooling">Options - bundle tooling<a href="#options---bundle-tooling" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_fF9Z" id="progress"><code>progress</code><a href="#progress" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><ul><li><p>Type: <code>boolean | undefined</code></p></li><li><p>Default: <code>true</code></p></li></ul><p>A boolean value to enable/disable the progress output of GojiJS CLI.</p><h3 class="anchor anchorWithStickyNavbar_fF9Z" id="watch"><code>watch</code><a href="#watch" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><ul><li><p>Type: <code>boolean | undefined</code></p></li><li><p>Default: <code>true</code> on development mode and <code>false</code> on production mode.</p></li></ul><p>A boolean value to enable/disable the watch mode of GojiJS CLI.</p><h3 class="anchor anchorWithStickyNavbar_fF9Z" id="outputpath"><code>outputPath</code><a href="#outputpath" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><ul><li><p>Type: <code>string | undefined</code></p></li><li><p>Default: <code>[basedir]/dist/[target]</code></p></li></ul><p>The output path of GojiJS CLI. The default folder structure is like this:</p><div class="codeBlockContainer_ZGJx theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qZBB"><pre tabindex="0" class="prism-code language-text codeBlock_TAPP thin-scrollbar"><code class="codeBlockLines_AdAo"><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── dist</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── alipay</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── baidu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── qq</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── toutiao</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── wechat</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── src</span><br></span></code></pre><div class="buttonGroup_TNwR"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MVhB" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_yxgH"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_QJLJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_fF9Z" id="parallel"><code>parallel</code><a href="#parallel" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><ul><li><p>Type: <code>undefined | number | { loader?: number; minimize?: number }</code></p></li><li><p>Default: <code>undefined</code></p></li></ul><p>A number or an object to enable/disable the parallel mode of GojiJS CLI. You can use <code>number</code> to
specify the number for overall parallel jobs. You can also use an object to specify the number for
each parallelizable stage.</p><h3 class="anchor anchorWithStickyNavbar_fF9Z" id="parallelloader"><code>parallel.loader</code><a href="#parallelloader" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><ul><li><p>Type: <code>number | undefined</code></p></li><li><p>Default: value based on the number of CPU cores.</p></li></ul><p>It equals to the number <code>workers</code> option of
<a href="https://webpack.js.org/loaders/thread-loader/" target="_blank" rel="noopener noreferrer">thread-loader</a> plus <code>1</code>.</p><blockquote><p>Note that too many parallel jobs may cost too much resources and even slow down performance. See
<a href="https://en.wikipedia.org/wiki/Amdahl%27s_law" target="_blank" rel="noopener noreferrer">Amdahl&#x27;s law</a>.</p></blockquote><blockquote><p>So we set a maximum of <code>workers</code> to 3 if <code>parallel.loader</code> is <code>undefined</code>.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_fF9Z" id="parallelminimize"><code>parallel.minimize</code><a href="#parallelminimize" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><ul><li><p>Type: <code>number | undefined</code></p></li><li><p>Default: value based on the number of CPU cores.</p></li></ul><p>The <code>parallel</code> option of
<a href="https://webpack.js.org/plugins/terser-webpack-plugin/#parallel" target="_blank" rel="noopener noreferrer">TerserWebpackPlugin</a>.</p><h3 class="anchor anchorWithStickyNavbar_fF9Z" id="configurebabel"><code>configureBabel</code><a href="#configurebabel" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><ul><li>Type: <code>undefined | (config: any) =&gt; undefined</code></li></ul><p>A function to configure the Babel config inside GojiJS.</p><p><code>config</code> is the <a href="https://babeljs.io/docs/en/config-files" target="_blank" rel="noopener noreferrer">Babel&#x27;s config object</a>.</p><div class="language-js codeBlockContainer_ZGJx theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qZBB"><pre tabindex="0" class="prism-code language-js codeBlock_TAPP thin-scrollbar"><code class="codeBlockLines_AdAo"><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function-variable function" style="color:#d73a49">configureBabel</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token parameter">config</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">plugins</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">push</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;babel-plugin-xxx&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_TNwR"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MVhB" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_yxgH"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_QJLJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_fF9Z" id="configurewebpack"><code>configureWebpack</code><a href="#configurewebpack" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><ul><li>Type: <code>undefined | (config: webpack.Configuration, webpackInGoji: typeof webpack) =&gt; undefined</code></li></ul><p>A function to configure the Webpack config inside GojiJS.</p><p>The <code>config</code> parameter is the <a href="https://webpack.js.org/configuration/" target="_blank" rel="noopener noreferrer">Webpack&#x27;s config object</a> that
you can modify it directly.</p><div class="language-js codeBlockContainer_ZGJx theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qZBB"><pre tabindex="0" class="prism-code language-js codeBlock_TAPP thin-scrollbar"><code class="codeBlockLines_AdAo"><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function-variable function" style="color:#d73a49">configureWebpack</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">config</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> webpack</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">plugins</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">push</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">OtherWebpackPlugin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_TNwR"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MVhB" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_yxgH"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_QJLJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>webpackInGoji</code> parameter is the instance of Webpack. In some cases, you may want to use the
fields/methods from it.</p><div class="language-js codeBlockContainer_ZGJx theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qZBB"><pre tabindex="0" class="prism-code language-js codeBlock_TAPP thin-scrollbar"><code class="codeBlockLines_AdAo"><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function-variable function" style="color:#d73a49">configureWebpack</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">config</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> webpack</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">plugins</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">push</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">webpack</span><span class="token class-name punctuation" style="color:#393A34">.</span><span class="token class-name">DefinePlugin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token constant" style="color:#36acaa">MY_ENV</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;hello world&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_TNwR"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MVhB" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_yxgH"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_QJLJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_fF9Z" id="options---output-optimizations">Options - output optimizations<a href="#options---output-optimizations" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_fF9Z" id="nohoist"><code>nohoist</code><a href="#nohoist" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>In GojiJS, we utilize <a href="https://webpack.js.org/" target="_blank" rel="noopener noreferrer">Webpack</a> to analyze module dependencies and bundle
the code. Through <a href="https://webpack.js.org/guides/code-splitting/" target="_blank" rel="noopener noreferrer">code splitting</a>, we can import
dependencies in a
<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/subpackages/basic.html" target="_blank" rel="noopener noreferrer">subpackage</a> from
various locations, such as the main package, <code> node_modules</code>, or even other subpackages. GojiJS can
<strong>hoist</strong> the shared code into a common chunk file (usually <code>\_goji_commons.js</code>) in the main
package.</p><p>Here is an example with 5 pages, where one is in the main package, and the others are in two
subpackages (<code>packageA</code> and <code>packageB</code>).</p><p><img loading="lazy" src="https://user-images.githubusercontent.com/1812118/138204963-4829b600-ac1a-4273-89ab-cf36d5cd03da.png" alt="sub packages example" class="img__Ss2"></p><p>In GojiJS, modules are hoisted to the root common chunk. This approach ensures that dependencies
align with the limitations of Mini Program subpackages.</p><h3 class="anchor anchorWithStickyNavbar_fF9Z" id="nohoistenable"><code>nohoist.enable</code><a href="#nohoistenable" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><ul><li><p>Type: <code>boolean | undefined</code></p></li><li><p>Default: <code>true</code> in production mode and <code>false</code> otherwise.</p></li></ul><p>In the above example, <code>redux</code> and <code>date-fns</code> are not considered shared code, so they can be moved
into subpackages to reduce the size of the main package. This optimization is referred to as
<strong>nohoist</strong>.</p><p>To enable this feature, you can set the <code>nohoist.enable</code> option to <code>true</code>.</p><h3 class="anchor anchorWithStickyNavbar_fF9Z" id="nohoistmaxpackages"><code>nohoist.maxPackages</code><a href="#nohoistmaxpackages" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><ul><li><p>Type: <code>number | undefined</code></p></li><li><p>Default: <code>1</code></p></li></ul><p>Some modules, such as <code>lodash</code> in the example, are shared only by subpackages. It is possible to
fork them into subpackages. While this increases the size of the total packages, it effectively
reduces the size of the main package.</p><p>To enable this feature, you can set <code>nohoist.maxPackages</code> to a number N greater than 1. A module
shared less than or equal to N will be forked into <code>packageName/_goji_nohoist_[contenthash].js</code>.</p><p><img loading="lazy" src="https://user-images.githubusercontent.com/1812118/138208851-2c0c7fe3-6e55-4744-b4af-b74fca59228a.png" alt="nohoist.maxPackages example" class="img__Ss2"></p><p>Even though the code is duplicated, the runtime closure remains a singleton.</p><p>This feature also works with
<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/subpackages/independent.html" target="_blank" rel="noopener noreferrer">independent packages</a>.</p><blockquote><p>Please note that this feature may impact user loading time because more duplicated code is
generated. It should only be used if the size of the main package has exceeded or is about to
exceed the limit.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_fF9Z" id="nohoisttest"><code>nohoist.test</code><a href="#nohoisttest" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><ul><li><p>Type:
<code>undefined | string | RegExp | ((module: webpack.Module, chunks: Array&lt;webpack.Chunk&gt;) =&gt; boolean)</code></p></li><li><p>Default: <code>undefined</code></p></li></ul><p>You can use this options to nohoist specific modules.</p><h3 class="anchor anchorWithStickyNavbar_fF9Z" id="css"><code>css</code><a href="#css" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>Options to configure the processing of styles.</p><h3 class="anchor anchorWithStickyNavbar_fF9Z" id="cssunit"><code>css.unit</code><a href="#cssunit" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><ul><li><p>Type: <code>undefined | &#x27;keep&#x27; | &#x27;to-px&#x27; | &#x27;to-rpx&#x27;</code></p></li><li><p>Default: <code>&#x27;to-rpx&#x27;</code></p></li></ul><p>There is a built-in PostCSS plugin called
<a href="https://github.com/airbnb/goji-js/pull/231" target="_blank" rel="noopener noreferrer">postcss-transform-unit</a> that can be used to transform
CSS units in all files. In some cases, you may want to convert the usage of <code>px</code> to <code>rpx</code> or vice
versa. You can use this option.</p><ul><li><p><code>keep</code>: Do not transform any CSS unit.</p></li><li><p><code>to-px</code>: Transform <code>rpx</code> to <code>px</code>. <code>2rpx</code> equals to <code>1px</code>.</p></li><li><p><code>to-rpx</code>: Transform <code>px</code> to <code>rpx</code>. <code>1px</code> equals to <code>2rpx</code>.</p></li></ul><blockquote><p>The default will be changed to <code>keep</code> in the future.</p></blockquote></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/airbnb/goji-js/tree/main/packages/goji.js.org/docs/advanced/config.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_UohW" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_T23F"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/guide/cross-platform"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Cross-Platform</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/advanced/css"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">CSS Module</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_TN1Q thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#example" class="table-of-contents__link toc-highlight">Example</a></li><li><a href="#options---bundle-tooling" class="table-of-contents__link toc-highlight">Options - bundle tooling</a><ul><li><a href="#progress" class="table-of-contents__link toc-highlight"><code>progress</code></a></li><li><a href="#watch" class="table-of-contents__link toc-highlight"><code>watch</code></a></li><li><a href="#outputpath" class="table-of-contents__link toc-highlight"><code>outputPath</code></a></li><li><a href="#parallel" class="table-of-contents__link toc-highlight"><code>parallel</code></a></li><li><a href="#parallelloader" class="table-of-contents__link toc-highlight"><code>parallel.loader</code></a></li><li><a href="#parallelminimize" class="table-of-contents__link toc-highlight"><code>parallel.minimize</code></a></li><li><a href="#configurebabel" class="table-of-contents__link toc-highlight"><code>configureBabel</code></a></li><li><a href="#configurewebpack" class="table-of-contents__link toc-highlight"><code>configureWebpack</code></a></li></ul></li><li><a href="#options---output-optimizations" class="table-of-contents__link toc-highlight">Options - output optimizations</a><ul><li><a href="#nohoist" class="table-of-contents__link toc-highlight"><code>nohoist</code></a></li><li><a href="#nohoistenable" class="table-of-contents__link toc-highlight"><code>nohoist.enable</code></a></li><li><a href="#nohoistmaxpackages" class="table-of-contents__link toc-highlight"><code>nohoist.maxPackages</code></a></li><li><a href="#nohoisttest" class="table-of-contents__link toc-highlight"><code>nohoist.test</code></a></li><li><a href="#css" class="table-of-contents__link toc-highlight"><code>css</code></a></li><li><a href="#cssunit" class="table-of-contents__link toc-highlight"><code>css.unit</code></a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/get-started/introduction">Get Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/guide/app">Guide</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/advanced/css">Advanced</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/faq">FAQ</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/airbnb/goji-js/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Issues<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_awgD"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_awgD"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">© 2022 Airbnb, Inc. All rights reserved. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.b0278967.js"></script>
<script src="/assets/js/main.352c77a8.js"></script>
</body>
</html>